- cambiar estructura de rooms: rooms:[
					sprites:[
						background:[
						doors:[
						objects:[
- server functions to open/close doors:

/*function doorTick(){
    for(var i in WORLD.rooms){
          var room = WORLD.rooms[i];
          var doors = room.sprites.doors;
          for(var j in doors){
              if(doors[j].src = "img/door_opened"){
                  doors[j],src = "img/door_closed";
              }
          }
    }
}

setInterval(doorTick(), 1000);*/

function changeRoom(user,msg){

    if(user.room_id != msg.room_id){

        var old_room = WORLD.rooms[user.room_id];
        var new_room =  WORLD.rooms[msg.room_id];

        if(old_room && new_room){

           // old_room.sprites.doors[room_id].src = "img/door-open..."
           // new_room.sprites.doors[room_id].src =  "img/door-open..."


            old_room.leaveUser(user);

            new_room.enterUser(user);
            //user.position[0] = new_room.sprites.doors[room_id].x;
            //user.target_position[0] = new_room.sprites.doors[room_id].x;

            var msg = { type: "room", room: new_room.toJSON()};
            user._connection.send(JSON.stringify(msg));
        }
    }
}